var E=(C,n,p)=>new Promise((c,o)=>{var k=i=>{try{w(p.next(i))}catch(m){o(m)}},b=i=>{try{w(p.throw(i))}catch(m){o(m)}},w=i=>i.done?c(i.value):Promise.resolve(i.value).then(k,b);w((p=p.apply(C,n)).next())});import{M as _}from"./motion-dDB4t5he.js";import{d as N,H as q,x as R,a2 as z,r as y,o as A,k as B,w as a,h as e,a3 as u,E as d,a as l,D as v,j as V,b0 as D,av as U,at as h}from"./index-2S-pRSzX.js";import{a as F,u as I}from"./verifyCode-uRowHp0J.js";import{u as x}from"./hooks-QG7FGeQA.js";import{d as S}from"./lock-fill-F0EFtWPf.js";import{d as $}from"./user-3-fill-Tv9bvDaP.js";const O=N({__name:"regist",setup(C){const{t:n}=q(),p=R(!1),c=R(!1),o=z({email:"",nickname:"",password:"",repeatPassword:""}),k=R(),b=[{validator:(m,r,s)=>{r===""?s(new Error(d(u("login.passwordSureReg")))):o.password!==r?s(new Error(d(u("login.passwordDifferentReg")))):s()},trigger:"blur"}],w=m=>E(this,null,function*(){c.value=!0,m&&(yield m.validate((r,s)=>{if(r)p.value?(c.value=!1,new Promise((f,P)=>{D({email:o.email,password:o.password,nickname:o.nickname}).then(g=>{g.code==200?(U(d(u("login.registerSuccess")),{type:"success"}),h().SET_CURRENTPAGE(0)):U(d(u("login.tickPrivacy")),{type:"warning"})}).catch(g=>{P(g)})})):(c.value=!1,U(d(u("login.tickPrivacy")),{type:"warning"}));else return c.value=!1,s}))});function i(){I().end(),h().SET_CURRENTPAGE(0)}return(m,r)=>{const s=y("el-input"),f=y("el-form-item"),P=y("el-checkbox"),g=y("el-button"),T=y("el-form");return A(),B(T,{ref_key:"ruleFormRef",ref:k,model:o,rules:e(F),size:"large"},{default:a(()=>[l(e(_),null,{default:a(()=>[l(f,{rules:[{required:!0,message:e(d)(e(u)("请输入昵称（限制3到50个字符）")),trigger:"blur",min:3,max:50}],prop:"nickname"},{default:a(()=>[l(s,{modelValue:o.nickname,"onUpdate:modelValue":r[0]||(r[0]=t=>o.nickname=t),clearable:"",placeholder:e(d)(e(u)("请输入昵称")),"prefix-icon":e(x)(e($))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"])]),_:1}),l(e(_),null,{default:a(()=>[l(f,{rules:[{required:!0,message:e(d)(e(u)("Please input email address")),trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}],prop:"email"},{default:a(()=>[l(s,{modelValue:o.email,"onUpdate:modelValue":r[1]||(r[1]=t=>o.email=t),clearable:"",placeholder:e(n)("register.email"),"prefix-icon":e(x)("il:email")},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"])]),_:1}),l(e(_),{delay:200},{default:a(()=>[l(f,{rules:[{required:!0,message:e(d)(e(u)("6到20个字符")),trigger:"blur",min:6,max:20}],prop:"password"},{default:a(()=>[l(s,{modelValue:o.password,"onUpdate:modelValue":r[2]||(r[2]=t=>o.password=t),clearable:"","show-password":"",placeholder:e(n)("login.password"),"prefix-icon":e(x)(e(S))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"])]),_:1}),l(e(_),{delay:250},{default:a(()=>[l(f,{rules:b,prop:"repeatPassword"},{default:a(()=>[l(s,{modelValue:o.repeatPassword,"onUpdate:modelValue":r[3]||(r[3]=t=>o.repeatPassword=t),clearable:"","show-password":"",placeholder:e(n)("login.sure"),"prefix-icon":e(x)(e(S))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(_),{delay:300},{default:a(()=>[l(f,null,{default:a(()=>[l(P,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=t=>p.value=t)},{default:a(()=>[V(v(e(n)("login.readAccept")),1)]),_:1},8,["modelValue"]),l(g,{link:"",type:"primary"},{default:a(()=>[V(v(e(n)("login.privacyPolicy")),1)]),_:1})]),_:1})]),_:1}),l(e(_),{delay:350},{default:a(()=>[l(f,null,{default:a(()=>[l(g,{class:"w-full",size:"default",type:"primary",loading:c.value,onClick:r[5]||(r[5]=t=>w(k.value))},{default:a(()=>[V(v(e(n)("login.definite")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),l(e(_),{delay:400},{default:a(()=>[l(f,null,{default:a(()=>[l(g,{class:"w-full",size:"default",onClick:i},{default:a(()=>[V(v(e(n)("login.back")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{O as _};
